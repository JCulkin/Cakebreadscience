<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî¨ SECRET LAB | Elevenstudents(best)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a1a 100%);
            min-height: 100vh;
            color: #00ff00;
            overflow: hidden;
            position: relative;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            animation: glitch 3s infinite;
        }

        @keyframes glitch {
            0%, 100% { 
                text-shadow: 0 0 10px #00ff00, 0 0 20px #ff00ff;
                opacity: 1;
            }
            25% { 
                text-shadow: -2px 0 10px #ff0000, 2px 0 20px #00ff00;
                opacity: 0.8;
            }
            50% { 
                text-shadow: 2px 0 10px #0000ff, -2px 0 20px #ff0000;
                opacity: 0.6;
            }
            75% { 
                text-shadow: 0 2px 10px #00ff00, 0 -2px 20px #0000ff;
                opacity: 0.8;
            }
        }

        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            color: #00ff00;
            text-shadow: 0 0 20px #00ff00, 0 0 40px #00ff00;
            letter-spacing: 3px;
        }

        .back-link {
            color: #00ff00;
            text-decoration: none;
            opacity: 0.8;
            transition: all 0.3s;
            display: inline-block;
            margin-bottom: 10px;
            padding: 8px 15px;
            border: 1px solid #00ff00;
            border-radius: 5px;
        }

        .back-link:hover {
            opacity: 1;
            background: rgba(0, 255, 0, 0.1);
        }

        .lab-container {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
            height: calc(100vh - 150px);
            overflow-y: auto;
        }

        .experiment-area {
            background: rgba(0, 20, 0, 0.9);
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .experiment-title {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }

        .canvas-wrapper {
            background: #000;
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 400px;
            position: relative;
        }

        .controls-panel {
            background: rgba(0, 40, 0, 0.8);
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 15px;
        }

        .controls-panel h3 {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #00ff00;
        }

        .control-btn {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            margin: 5px;
            transition: all 0.2s;
        }

        .control-btn:hover {
            background: #00cc00;
            transform: scale(1.05);
        }

        .data-panel {
            background: rgba(0, 40, 0, 0.8);
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 15px;
            font-size: 0.9em;
        }

        .data-panel h3 {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #00ff00;
        }

        .data-item {
            margin-bottom: 8px;
            padding: 8px;
            background: rgba(0, 255, 0, 0.1);
            border-left: 3px solid #00ff00;
        }

        .terminal {
            background: #000;
            border: 1px solid #00ff00;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            height: 200px;
            overflow-y: auto;
            margin-top: 20px;
            color: #00ff00;
        }

        .terminal-input {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .terminal-input input {
            flex: 1;
            background: #001100;
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 8px 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        .terminal-input button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .terminal-line {
            margin-bottom: 5px;
            opacity: 0;
            animation: type 0.5s steps(20) forwards;
        }

        @keyframes type {
            from { width: 0; }
            to { width: 100%; }
        }

        .access-denied {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            color: #ff0000;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            z-index: 10000;
            border: 2px solid #ff0000;
            font-size: 1.2em;
        }

        .matrix-rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.1;
        }

        .matrix-char {
            position: absolute;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            animation: fall linear;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }

        .secret-message {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.85);
            color: #00ff00;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 0.8em;
            border: 1px solid #00ff00;
            z-index: 1000;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Matrix rain effect -->
    <div class="matrix-rain" id="matrix"></div>

    <div class="container">
        <header>
            <a href="../index.html" class="back-link">‚Üê ESCAPE TO MAIN</a>
            <h1>üî¨ SECRET LAB</h1>
            <p>‚ö†Ô∏è RESTRICTED ACCESS - AUTHORIZED PERSONNEL ONLY</p>
        </header>

        <div class="lab-container">
            <div class="experiment-area">
                <h2 class="experiment-title">üß™ QUANTUM PARTICLE COLLIDER</h2>
                <div class="canvas-wrapper">
                    <div id="sketch-container"></div>
                </div>
                
                <div class="controls-panel">
                    <h3>üéõ EXPERIMENT CONTROLS</h3>
                    <button class="control-btn" onclick="toggleChaos()">CHAOS MODE</button>
                    <button class="control-btn" onclick="addParticles()">ADD PARTICLES</button>
                    <button class="control-btn" onclick="resetExperiment()">RESET</button>
                    <button class="control-btn" onclick="exportData()">EXPORT DATA</button>
                </div>
                
                <div class="data-panel">
                    <h3>üìä EXPERIMENT DATA</h3>
                    <div class="data-item">
                        <strong>Particles:</strong> <span id="particle-count">0</span>
                    </div>
                    <div class="data-item">
                        <strong>Collisions:</strong> <span id="collision-count">0</span>
                    </div>
                    <div class="data-item">
                        <strong>Energy Level:</strong> <span id="energy-level">NORMAL</span>
                    </div>
                    <div class="data-item">
                        <strong>Status:</strong> <span id="status">READY</span>
                    </div>
                </div>
            </div>

            <div class="experiment-area">
                <h2 class="experiment-title">üî¨ REALITY DISTORTION FIELD</h2>
                <div class="canvas-wrapper">
                    <div id="distortion-container"></div>
                </div>
                
                <div class="controls-panel">
                    <h3>üéõ DISTORTION CONTROLS</h3>
                    <button class="control-btn" onclick="increaseDistortion()">AMPLIFY</button>
                    <button class="control-btn" onclick="decreaseDistortion()">STABILIZE</button>
                    <button class="control-btn" onclick="randomizeField()">RANDOMIZE</button>
                </div>
            </div>

            <div class="experiment-area">
                <h2 class="experiment-title">‚öõÔ∏è NEURAL INTERFACE</h2>
                <div class="terminal">
                    <div class="terminal-line">> Initializing neural interface...</div>
                    <div class="terminal-line">> Connection established to mainframe...</div>
                    <div class="terminal-line">> Accessing student database...</div>
                    <div class="terminal-line">> Retrieving classified projects...</div>
                    <div class="terminal-line">> [CLASSIFIED DATA REMOVED]</div>
                    <div class="terminal-line">> System ready. Type 'help' for commands.</div>
                </div>
                <div class="terminal-input">
                    <input id="neural-input" type="text" placeholder="Type a command (help, look, go north, take keycard)..." />
                    <button id="neural-submit">Enter</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Secret message -->
    <div class="secret-message" id="secret" style="display: none;">
        üéâ YOU FOUND THE SECRET LAB! üéâ<br>
        <small>Congratulations, researcher! You've unlocked the hidden experiments.</small>
    </div>

    <script>
        // Matrix rain effect
        function createMatrixRain() {
            const matrix = document.getElementById('matrix');
            // clear previous rain so re-calling doesn't duplicate
            matrix.innerHTML = '';
            const chars = '01ÔæäÔæêÔæãÔΩ∏ÔΩ≥ÔæÉÔæèÔæÖÔæìÔΩªÔæÜÔæáÔæà';
            for (let i = 0; i < 60; i++) {
                const char = document.createElement('div');
                char.className = 'matrix-char';
                char.textContent = chars[Math.floor(Math.random() * chars.length)];
                char.style.left = (Math.random() * 100) + '%';
                char.style.top = (-10 - Math.random() * 20) + 'vh';
                char.style.animationDuration = (Math.random() * 3 + 3) + 's';
                char.style.animationDelay = Math.random() * 2 + 's';
                matrix.appendChild(char);
            }
        }

        // Quantum particle collider variables
        let particles = [];
        let chaosMode = false;
        let collisionCount = 0;
        let energyLevel = 'NORMAL';
        let distortionLevel = 1;

        function setup() {
            let canvas = createCanvas(350, 350);
            canvas.parent('sketch-container');
            
            // Initialize particles
            for(let i = 0; i < 20; i++) {
                particles.push({
                    x: random(width),
                    y: random(height),
                    vx: random(-2, 2),
                    vy: random(-2, 2),
                    size: random(5, 15),
                    color: [random(100, 255), random(100, 255), random(100, 255)]
                });
            }
            
            updateDataPanel();
            // Initialize visual helpers
            createMatrixRain();
            setupDistortion();
            animateTerminal();
        }

        function draw() {
            background(0, 10, 0);
            
            // Draw particles
            for(let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i];
                
                // Update position
                if(chaosMode) {
                    p.vx += random(-1, 1);
                    p.vy += random(-1, 1);
                }
                
                p.x += p.vx;
                p.y += p.vy;
                
                // Wrap around
                if(p.x < 0) p.x = width;
                if(p.x > width) p.x = 0;
                if(p.y < 0) p.y = height;
                if(p.y > height) p.y = 0;
                
                // Draw particle
                fill(p.color[0], p.color[1], p.color[2]);
                noStroke();
                ellipse(p.x, p.y, p.size);
                
                // Check collisions
                for(let j = i - 1; j >= 0; j--) {
                    let p2 = particles[j];
                    let d = dist(p.x, p.y, p2.x, p2.y);
                    if(d < p.size + p2.size) {
                        // Collision detected
                        handleCollision(p, p2);
                    }
                }
            }
            
            updateDataPanel();
        }

        function handleCollision(p1, p2) {
            collisionCount++;
            updateDataPanel();
            
            // Create collision effect
            for(let i = 0; i < 10; i++) {
                particles.push({
                    x: (p1.x + p2.x) / 2,
                    y: (p1.y + p2.y) / 2,
                    vx: random(-5, 5),
                    vy: random(-5, 5),
                    size: random(2, 8),
                    color: [255, random(100, 255), random(100, 255)]
                });
            }
            
            // Limit particles
            if(particles.length > 100) {
                particles = particles.slice(-100);
            }
        }

        function toggleChaos() {
            chaosMode = !chaosMode;
            energyLevel = chaosMode ? 'CHAOTIC' : 'NORMAL';
            updateDataPanel();
        }

        function addParticles() {
            for(let i = 0; i < 10; i++) {
                particles.push({
                    x: random(width),
                    y: random(height),
                    vx: random(-3, 3),
                    vy: random(-3, 3),
                    size: random(5, 20),
                    color: [random(100, 255), random(100, 255), random(100, 255)]
                });
            }
            updateDataPanel();
        }

        function resetExperiment() {
            particles = [];
            for(let i = 0; i < 20; i++) {
                particles.push({
                    x: random(width),
                    y: random(height),
                    vx: random(-2, 2),
                    vy: random(-2, 2),
                    size: random(5, 15),
                    color: [random(100, 255), random(100, 255), random(100, 255)]
                });
            }
            chaosMode = false;
            energyLevel = 'NORMAL';
            collisionCount = 0;
            updateDataPanel();
        }

        function exportData() {
            const data = {
                particles: particles.length,
                collisions: collisionCount,
                energyLevel: energyLevel,
                chaosMode: chaosMode,
                timestamp: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'quantum_data_' + Date.now() + '.json';
            a.click();
        }

        function updateDataPanel() {
            document.getElementById('particle-count').textContent = particles.length;
            document.getElementById('collision-count').textContent = collisionCount;
            document.getElementById('energy-level').textContent = energyLevel;
            document.getElementById('status').textContent = chaosMode ? 'CHAOS ACTIVE' : 'STABLE';
        }

        // Reality distortion field
        function setupDistortion() {
            let container = document.getElementById('distortion-container');
            container.innerHTML = '';
            for (let i = 0; i < 5; i++) {
                const div = document.createElement('div');
                const size = Math.max(40, 60 * distortionLevel - i * 6);
                const left = 20 + i * 60;
                const top = 20 + i * 45;
                div.style.cssText = `position:absolute; width:${size}px; height:${size}px; background:radial-gradient(circle, rgba(0,255,0,0.25), transparent); border:2px solid #00ff00; border-radius:50%; left:${left}px; top:${top}px; animation:pulse ${1 + i * 0.25}s infinite; opacity:0.9;`;
                container.appendChild(div);
            }
        }

        function increaseDistortion() {
            distortionLevel = min(distortionLevel + 0.5, 5);
            setupDistortion();
        }

        function decreaseDistortion() {
            distortionLevel = max(distortionLevel - 0.5, 1);
            setupDistortion();
        }

        function randomizeField() {
            setupDistortion();
        }

        // Make terminal lines appear with a small staggered typing animation
        function animateTerminal() {
            const terminals = document.querySelectorAll('.terminal');
            terminals.forEach(term => {
                const lines = term.querySelectorAll('.terminal-line');
                lines.forEach((line, idx) => {
                    setTimeout(() => {
                        line.style.opacity = '1';
                    }, idx * 400 + 200);
                });
            });
        }

        // Easter egg: Show secret message after 10 seconds
        setTimeout(() => {
            document.getElementById('secret').style.display = 'block';
            setTimeout(() => {
                document.getElementById('secret').style.display = 'none';
            }, 5000);
        }, 10000);

        // Terminal typing effect
        function typeTerminal(text, element, delay = 50) {
            const lines = element.querySelectorAll('.terminal-line');
            const lastLine = lines[lines.length - 1];
            
            setTimeout(() => {
                lastLine.textContent = '> ' + text;
                lastLine.style.width = '0';
            }, delay);
        }

        // Mini-adventure state and terminal interaction
        (function(){
            const terminal = document.querySelector('.terminal');
            const input = document.getElementById('neural-input');
            const submit = document.getElementById('neural-submit');
            const state = {
                location: 'lab',
                inventory: []
            };

            const rooms = {
                lab: {
                    desc: 'You are in a dim lab filled with humming machines. There is a door to the north.',
                    exits: { north: 'server' },
                    items: ['keycard']
                },
                server: {
                    desc: 'A small server room with blinking lights and a locked cabinet.',
                    exits: { south: 'lab' },
                    items: []
                }
            };

            function appendLine(text) {
                const div = document.createElement('div');
                div.className = 'terminal-line';
                div.textContent = '> ' + text;
                div.style.opacity = '1';
                terminal.appendChild(div);
                terminal.scrollTop = terminal.scrollHeight;
            }

            function showHelp(){
                appendLine('Available commands: help, look, go <direction>, take <item>, inventory, clear');
            }

            function doLook(){
                const room = rooms[state.location];
                appendLine(room.desc);
                if(room.items && room.items.length) appendLine('You see: ' + room.items.join(', '));
            }

            function doGo(dir){
                const room = rooms[state.location];
                if(room.exits && room.exits[dir]){
                    state.location = room.exits[dir];
                    appendLine('You go ' + dir + '.');
                    doLook();
                } else appendLine('You cannot go ' + dir + '.');
            }

            function doTake(item){
                const room = rooms[state.location];
                const idx = room.items.indexOf(item);
                if(idx >= 0){
                    room.items.splice(idx,1);
                    state.inventory.push(item);
                    appendLine('Taken: ' + item);
                } else appendLine('No ' + item + ' here.');
            }

            function doInventory(){
                if(state.inventory.length === 0) appendLine('Inventory is empty.');
                else appendLine('Inventory: ' + state.inventory.join(', '));
            }

            function process(command){
                if(!command) return;
                const parts = command.trim().toLowerCase().split(/\s+/);
                const verb = parts[0];
                if(verb === 'help') showHelp();
                else if(verb === 'look') doLook();
                else if(verb === 'go' && parts[1]) doGo(parts[1]);
                else if(verb === 'take' && parts[1]) doTake(parts[1]);
                else if(verb === 'inventory') doInventory();
                else if(verb === 'clear') { terminal.innerHTML = ''; appendLine('Terminal cleared.'); }
                else appendLine('Unknown command. Type help.');
            }

            submit.addEventListener('click', ()=>{
                const v = input.value.trim();
                if(!v) return; appendLine(v); process(v); input.value = '';
            });

            input.addEventListener('keydown', e=>{
                if(e.key === 'Enter') { e.preventDefault(); submit.click(); }
            });
        })();

        // Initialize distortion field (setup() will call it for p5 canvas-based init)
    </script>
</body>
</html>